{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useLocation,useNavigate}from'react-router-dom';import queryString from'query-string';import{API_ADDRESS}from'../../../apiConfig';import OrderSheet from'./OrderSheet/OrderSheet';import Button from'../../../components/Button/Button';import'./OrderConfirm.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OrderConfirm=function OrderConfirm(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orderSheet=_useState2[0],setOrderSheet=_useState2[1];var user=orderSheet.user,address=orderSheet.address,order_items=orderSheet.order_items;var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),totalPrice=_useState4[0],setTotalPrice=_useState4[1];var location=useLocation();var navigate=useNavigate();var token=localStorage.getItem('TOKEN')||'';var _queryString$parse=queryString.parse(location.search),order=_queryString$parse.order;var fetchOrderSheetData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(API_ADDRESS.order_checkout+\"?id=\".concat(order),{headers:{Authorization:token}});case 2:data=_context.sent;_context.next=5;return data.json();case 5:res=_context.sent;setOrderSheet(res.order_list[0]);res.order_list[0].order_items.forEach(function(_ref2){var price=_ref2.price;return setTotalPrice(function(prev){return prev+price;});});case 8:case\"end\":return _context.stop();}}},_callee);}));return function fetchOrderSheetData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchOrderSheetData();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"orderConfirm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pageTitleArea\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"progressNav\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"progress\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"step\",children:/*#__PURE__*/_jsx(\"p\",{children:\"01 \\uC7A5\\uBC14\\uAD6C\\uB2C8\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"step\",children:/*#__PURE__*/_jsx(\"p\",{children:\"02 \\uACB0\\uC81C\\uC9C4\\uD589\"})}),/*#__PURE__*/_jsxs(\"li\",{className:\"step\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"03 \\uC8FC\\uBB38\\uC644\\uB8CC\"}),/*#__PURE__*/_jsx(\"span\",{className:\"line\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"pageTitle\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"confirmTitle\",children:\"\\uC8FC\\uBB38 \\uC644\\uB8CC\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pageContent\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"orderConfirmMessage\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"userName\",children:user}),\"\\uB2D8\\uC5D0\\uAC8C \\uCC98\\uBC29\\uB41C \\uB514\\uC800\\uD2B8\\uAC00 \\uBC30\\uC1A1\\uB420 \\uC608\\uC815\\uC785\\uB2C8\\uB2E4!\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"orderAddressMessage\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uBC30\\uC1A1\\uC9C0 : \",/*#__PURE__*/_jsx(\"p\",{className:\"address\",children:address})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"sheetContainer\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"goodsTable\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"goodsTableHead\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"tableHeadElement tableHeadImage\"}),/*#__PURE__*/_jsx(\"th\",{className:\"tableHeadElement tableHeadGoods\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uC0C1\\uD488\"})}),/*#__PURE__*/_jsx(\"th\",{className:\"tableHeadElement tableHeadQuantity\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uC218\\uB7C9\"})})]})}),order_items&&order_items.map(function(product){return/*#__PURE__*/_jsx(OrderSheet,{product:product},product.product_id);})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"totalPrice\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"priceContents\",children:[\"\\uCD1D\",/*#__PURE__*/_jsxs(\"p\",{className:\"price\",children:[\" \",Math.round(totalPrice),\" \"]}),\" \\uC6D0\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"continueButtonContainer\",children:/*#__PURE__*/_jsx(Button,{btnOnClick:function btnOnClick(){return navigate('/product-list');},children:\"\\uC1FC\\uD551 \\uACC4\\uC18D\\uD558\\uAE30\"})})]})]});};export default OrderConfirm;","map":{"version":3,"sources":["C:/Users/user/Desktop/2차프로젝트/DrTart-frontend/src/pages/Order/OrderConfirm/OrderConfirm.js"],"names":["React","useEffect","useState","useLocation","useNavigate","queryString","API_ADDRESS","OrderSheet","Button","OrderConfirm","orderSheet","setOrderSheet","user","address","order_items","totalPrice","setTotalPrice","location","navigate","token","localStorage","getItem","parse","search","order","fetchOrderSheetData","fetch","order_checkout","headers","Authorization","data","json","res","order_list","forEach","price","prev","map","product","product_id","Math","round"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport queryString from 'query-string';\nimport { API_ADDRESS } from '../../../apiConfig';\nimport OrderSheet from './OrderSheet/OrderSheet';\nimport Button from '../../../components/Button/Button';\nimport './OrderConfirm.scss';\n\nconst OrderConfirm = () => {\n  const [orderSheet, setOrderSheet] = useState([]);\n  const { user, address, order_items } = orderSheet;\n  const [totalPrice, setTotalPrice] = useState(0);\n  const location = useLocation();\n  const navigate = useNavigate();\n  let token = localStorage.getItem('TOKEN') || '';\n  const { order } = queryString.parse(location.search);\n\n  const fetchOrderSheetData = async () => {\n    const data = await fetch(API_ADDRESS.order_checkout + `?id=${order}`, {\n      headers: { Authorization: token },\n    });\n    const res = await data.json();\n    setOrderSheet(res.order_list[0]);\n    res.order_list[0].order_items.forEach(({ price }) =>\n      setTotalPrice(prev => prev + price)\n    );\n  };\n\n  useEffect(() => {\n    fetchOrderSheetData();\n  }, []);\n\n  return (\n    <div className=\"orderConfirm\">\n      <div className=\"pageTitleArea\">\n        <div className=\"progressNav\">\n          <ul className=\"progress\">\n            <li className=\"step\">\n              <p>01 장바구니</p>\n            </li>\n            <li className=\"step\">\n              <p>02 결제진행</p>\n            </li>\n            <li className=\"step\">\n              <p>03 주문완료</p>\n              <span className=\"line\" />\n            </li>\n          </ul>\n        </div>\n        <div className=\"pageTitle\">\n          <h1 className=\"confirmTitle\">주문 완료</h1>\n        </div>\n      </div>\n      <div className=\"pageContent\">\n        <div className=\"orderConfirmMessage\">\n          <h3>\n            <p className=\"userName\">{user}</p>님에게 처방된 디저트가 배송될\n            예정입니다!\n          </h3>\n        </div>\n        <div className=\"orderAddressMessage\">\n          <h3>\n            배송지 : <p className=\"address\">{address}</p>\n          </h3>\n        </div>\n        <div className=\"sheetContainer\">\n          <table className=\"goodsTable\">\n            <thead className=\"goodsTableHead\">\n              <tr>\n                <th className=\"tableHeadElement tableHeadImage\" />\n                <th className=\"tableHeadElement tableHeadGoods\">\n                  <p>상품</p>\n                </th>\n                <th className=\"tableHeadElement tableHeadQuantity\">\n                  <p>수량</p>\n                </th>\n              </tr>\n            </thead>\n            {order_items &&\n              order_items.map(product => (\n                <OrderSheet key={product.product_id} product={product} />\n              ))}\n          </table>\n        </div>\n        <div className=\"totalPrice\">\n          <h3 className=\"priceContents\">\n            총<p className=\"price\"> {Math.round(totalPrice)} </p> 원\n          </h3>\n        </div>\n        <div className=\"continueButtonContainer\">\n          <Button btnOnClick={() => navigate('/product-list')}>\n            쇼핑 계속하기\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default OrderConfirm;\n"]},"metadata":{},"sourceType":"module"}