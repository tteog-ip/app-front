{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Product from'../Product/Product';import ImageSlide from'./ImageSlide/ImageSlide';import ModalBuyNow from'../ModalBuyNow/ModalBuyNow';import{API_ADDRESS}from'../../../apiConfig';import'./ProductsMain.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductsMain(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isProductMainLoading=_useState2[0],setIsProductMainLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),productsList=_useState4[0],setProductsList=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isPopModal=_useState6[0],setIsPopModal=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),selectedProduct=_useState8[0],setSelectedProduct=_useState8[1];var PopUpModalBuyNow=function PopUpModalBuyNow(product){setIsPopModal(true);setSelectedProduct(product);};var updateLike=function updateLike(id){var updatedList=productsList.map(function(product){if(id===product.id){return product.is_like_True?_objectSpread(_objectSpread({},product),{},{is_like_True:!product.is_like_True,like_num:product.like_num-1}):_objectSpread(_objectSpread({},product),{},{is_like_True:!product.is_like_True,like_num:product.like_num+1});}else{return _objectSpread({},product);}});setProductsList(updatedList);};var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(API_ADDRESS.product_main);case 2:data=_context.sent;_context.next=5;return data.json();case 5:res=_context.sent;setProductsList(res.product_list);case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setIsProductMainLoading(true);_context2.next=3;return fetchData();case 3:setIsProductMainLoading(false);case 4:case\"end\":return _context2.stop();}}},_callee2);}))();},[]);return!isProductMainLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"productsMain\",children:[isPopModal&&/*#__PURE__*/_jsx(ModalBuyNow,{setIsPopModal:setIsPopModal,infoTag:productsList.description,product:selectedProduct}),/*#__PURE__*/_jsx(\"div\",{className:isPopModal?'mask':'maskOff'}),/*#__PURE__*/_jsx(ImageSlide,{})]});}export default ProductsMain;/*\n<div className=\"productListHead\">베스트셀러 TOP 5</div>\n        <div className=\"productListContainer\">\n          {productsList.map(el => (\n            <Product\n              el={el}\n              key={el.id}\n              id={el.id}\n              btnOnClick={PopUpModalBuyNow}\n              updateLike={updateLike}\n            />\n          ))}\n        </div>\n*/","map":{"version":3,"names":["React","useEffect","useState","Product","ImageSlide","ModalBuyNow","API_ADDRESS","jsx","_jsx","jsxs","_jsxs","ProductsMain","_useState","_useState2","_slicedToArray","isProductMainLoading","setIsProductMainLoading","_useState3","_useState4","productsList","setProductsList","_useState5","_useState6","isPopModal","setIsPopModal","_useState7","_useState8","selectedProduct","setSelectedProduct","PopUpModalBuyNow","product","updateLike","id","updatedList","map","is_like_True","_objectSpread","like_num","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","res","wrap","_callee$","_context","prev","next","fetch","product_main","sent","json","product_list","stop","apply","arguments","_callee2","_callee2$","_context2","className","children","infoTag","description"],"sources":["C:/Users/user/Desktop/2차프로젝트/DrTart-frontend/src/pages/ProductList/ProductsMain/ProductsMain.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Product from '../Product/Product';\nimport ImageSlide from './ImageSlide/ImageSlide';\nimport ModalBuyNow from '../ModalBuyNow/ModalBuyNow';\nimport { API_ADDRESS } from '../../../apiConfig';\nimport './ProductsMain.scss';\n\nfunction ProductsMain() {\n  const [isProductMainLoading, setIsProductMainLoading] = useState(false);\n  const [productsList, setProductsList] = useState([]);\n  const [isPopModal, setIsPopModal] = useState(false);\n  const [selectedProduct, setSelectedProduct] = useState({});\n\n  const PopUpModalBuyNow = product => {\n    setIsPopModal(true);\n    setSelectedProduct(product);\n  };\n\n  const updateLike = id => {\n    const updatedList = productsList.map(product => {\n      if (id === product.id) {\n        return product.is_like_True\n          ? {\n              ...product,\n              is_like_True: !product.is_like_True,\n              like_num: product.like_num - 1,\n            }\n          : {\n              ...product,\n              is_like_True: !product.is_like_True,\n              like_num: product.like_num + 1,\n            };\n      } else {\n        return { ...product };\n      }\n    });\n\n    setProductsList(updatedList);\n  };\n\n  const fetchData = async () => {\n    const data = await fetch(API_ADDRESS.product_main);\n    const res = await data.json();\n    setProductsList(res.product_list);\n  };\n\n  useEffect(() => {\n    (async () => {\n      setIsProductMainLoading(true);\n      await fetchData();\n      setIsProductMainLoading(false);\n    })();\n  }, []);\n\n  return (\n    !isProductMainLoading && (\n      <div className=\"productsMain\">\n        {isPopModal && (\n          <ModalBuyNow\n            setIsPopModal={setIsPopModal}\n            infoTag={productsList.description}\n            product={selectedProduct}\n          />\n        )}\n        <div className={isPopModal ? 'mask' : 'maskOff'} />\n        <ImageSlide />\n      </div>\n    )\n  );\n}\n\nexport default ProductsMain;\n\n/*\n<div className=\"productListHead\">베스트셀러 TOP 5</div>\n        <div className=\"productListContainer\">\n          {productsList.map(el => (\n            <Product\n              el={el}\n              key={el.id}\n              id={el.id}\n              btnOnClick={PopUpModalBuyNow}\n              updateLike={updateLike}\n            />\n          ))}\n        </div>\n*/\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}