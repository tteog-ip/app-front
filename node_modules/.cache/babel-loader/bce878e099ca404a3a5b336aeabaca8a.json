{"ast":null,"code":"import _slicedToArray from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Link,useNavigate}from'react-router-dom';import NumBtn from'../ProductInfoBox/NumBtn/NumBtn';import Button from'../Button/Button';import{API_ADDRESS}from'../../apiConfig';import'../ProductInfoBox/ProductInfoBox.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductInfoBox=function ProductInfoBox(_ref){var productId=_ref.productId,koreanName=_ref.koreanName,sugarLevel=_ref.sugarLevel,price=_ref.price,infoTag=_ref.infoTag,isVegan=_ref.isVegan,is_like_True=_ref.is_like_True,cartAndLikeBtn=_ref.cartAndLikeBtn,thumbnailImg=_ref.thumbnailImg,updateProductLiked=_ref.updateProductLiked;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),numValue=_useState2[0],setNumValue=_useState2[1];var token=localStorage.getItem('TOKEN');var minusOne=function minusOne(){numValue===1?setNumValue(1):setNumValue(numValue-1);};var plusOne=function plusOne(){setNumValue(numValue+1);};var tokenValid=function tokenValid(){return token?'':alert('로그인이 필요합니다.');};var goCheckValid=token?'/order/check':'/login';var totalPrice=price*numValue;var navigate=useNavigate();function goToCart(){if(window.confirm('장바구니로 이동하시겠습니까?'))navigate('/order/cart');else return;}var addToCart=function addToCart(){if(token){fetch(API_ADDRESS.order_cart,{method:'POST',headers:{Authorization:token},body:JSON.stringify({product_id:productId,quantity:numValue})}).then(function(response){return response.json();}).then(function(result){return result.message==='SUCCESS'&&goToCart();});}else{alert('로그인이 필요합니다.');navigate('/login');}};var onLikeButton=function onLikeButton(){fetch(API_ADDRESS.products_like,{method:'POST',headers:{Authorization:token},body:JSON.stringify({product_id:productId})});updateProductLiked(productId);};return/*#__PURE__*/_jsxs(\"div\",{className:\"productInfoBox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stickerWrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stickerBest\",children:\"BEST\"}),isVegan&&/*#__PURE__*/_jsx(\"div\",{className:\"stickerVegan\",children:\"VEGAN\"})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"productName\",children:koreanName}),/*#__PURE__*/_jsx(\"p\",{className:\"infoTag\",children:infoTag}),/*#__PURE__*/_jsx(\"div\",{className:\"price\",children:/*#__PURE__*/_jsx(\"p\",{className:\"originPrice\",children:Math.round(price)})}),/*#__PURE__*/_jsx(\"ul\",{className:\"tabBar\",children:/*#__PURE__*/_jsx(\"li\",{className:\"infoToBuy\",children:\"\\uAD6C\\uB9E4\\uC815\\uBCF4\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"tabContents\",children:[/*#__PURE__*/_jsxs(\"dl\",{className:\"list\",children:[/*#__PURE__*/_jsx(\"dt\",{className:\"title\",children:\"\\uC218\\uB7C9\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"defines\",children:/*#__PURE__*/_jsx(NumBtn,{minusOne:minusOne,plusOne:plusOne,numValue:numValue})})]}),/*#__PURE__*/_jsxs(\"dl\",{className:\"list\",children:[/*#__PURE__*/_jsx(\"dt\",{className:\"title\",children:\"\\uB2F9\\uB3C4\"}),/*#__PURE__*/_jsx(\"dt\",{children:sugarLevel})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"totalPriceInfo\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"totalPriceTitle\",children:\"\\uCD1D \\uAD6C\\uB9E4\\uAE08\\uC561\"}),/*#__PURE__*/_jsx(\"p\",{className:\"totalPrice\",children:Math.round(totalPrice)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btnWrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"buyBtn\",children:/*#__PURE__*/_jsx(Link,{to:goCheckValid,state:{cartList:[{product_id:productId,korean_name:koreanName,quantity:numValue,price:price,thumbnail_image_url:thumbnailImg}]},children:/*#__PURE__*/_jsx(Button,{point:true,btnOnClick:tokenValid,children:\"\\uBC14\\uB85C\\uAD6C\\uB9E4\"})})}),cartAndLikeBtn&&/*#__PURE__*/_jsxs(\"div\",{className:\"cartAndLikeBtn\",children:[/*#__PURE__*/_jsx(Button,{btnOnClick:addToCart,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-shopping-cart\"})}),/*#__PURE__*/_jsx(\"button\",{className:is_like_True?'likeButton isLiked':'likeButton',onClick:onLikeButton,children:/*#__PURE__*/_jsx(\"i\",{className:\"far fa-heart\"})})]})]})]});};export default ProductInfoBox;","map":{"version":3,"names":["React","useState","Link","useNavigate","NumBtn","Button","API_ADDRESS","jsx","_jsx","jsxs","_jsxs","ProductInfoBox","_ref","productId","koreanName","sugarLevel","price","infoTag","isVegan","is_like_True","cartAndLikeBtn","thumbnailImg","updateProductLiked","_useState","_useState2","_slicedToArray","numValue","setNumValue","token","localStorage","getItem","minusOne","plusOne","tokenValid","alert","goCheckValid","totalPrice","navigate","goToCart","window","confirm","addToCart","fetch","order_cart","method","headers","Authorization","body","JSON","stringify","product_id","quantity","then","response","json","result","message","onLikeButton","products_like","className","children","Math","round","to","state","cartList","korean_name","thumbnail_image_url","point","btnOnClick","onClick"],"sources":["C:/Users/user/Desktop/2차프로젝트/DrTart-frontend/src/components/ProductInfoBox/ProductInfoBox.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport NumBtn from '../ProductInfoBox/NumBtn/NumBtn';\nimport Button from '../Button/Button';\nimport { API_ADDRESS } from '../../apiConfig';\nimport '../ProductInfoBox/ProductInfoBox.scss';\n\nconst ProductInfoBox = ({\n  productId,\n  koreanName,\n  sugarLevel,\n  price,\n  infoTag,\n  isVegan,\n  is_like_True,\n  cartAndLikeBtn,\n  thumbnailImg,\n  updateProductLiked,\n}) => {\n  const [numValue, setNumValue] = useState(1);\n  let token = localStorage.getItem('TOKEN');\n\n  const minusOne = () => {\n    numValue === 1 ? setNumValue(1) : setNumValue(numValue - 1);\n  };\n\n  const plusOne = () => {\n    setNumValue(numValue + 1);\n  };\n\n  const tokenValid = () => {\n    return token ? '' : alert('로그인이 필요합니다.');\n  };\n  const goCheckValid = token ? '/order/check' : '/login';\n\n  const totalPrice = price * numValue;\n\n  const navigate = useNavigate();\n\n  function goToCart() {\n    if (window.confirm('장바구니로 이동하시겠습니까?')) navigate('/order/cart');\n    else return;\n  }\n\n  const addToCart = () => {\n    if (token) {\n      fetch(API_ADDRESS.order_cart, {\n        method: 'POST',\n        headers: {\n          Authorization: token,\n        },\n        body: JSON.stringify({\n          product_id: productId,\n          quantity: numValue,\n        }),\n      })\n        .then(response => response.json())\n        .then(result => result.message === 'SUCCESS' && goToCart());\n    } else {\n      alert('로그인이 필요합니다.');\n      navigate('/login');\n    }\n  };\n\n  const onLikeButton = () => {\n    fetch(API_ADDRESS.products_like, {\n      method: 'POST',\n      headers: {\n        Authorization: token,\n      },\n      body: JSON.stringify({\n        product_id: productId,\n      }),\n    });\n    updateProductLiked(productId);\n  };\n\n  return (\n    <div className=\"productInfoBox\">\n      <div className=\"stickerWrap\">\n        <div className=\"stickerBest\">BEST</div>\n        {isVegan && <div className=\"stickerVegan\">VEGAN</div>}\n      </div>\n      <h3 className=\"productName\">{koreanName}</h3>\n      <p className=\"infoTag\">{infoTag}</p>\n      <div className=\"price\">\n        <p className=\"originPrice\">{Math.round(price)}</p>\n      </div>\n      <ul className=\"tabBar\">\n        <li className=\"infoToBuy\">구매정보</li>\n      </ul>\n      <div className=\"tabContents\">\n        <dl className=\"list\">\n          <dt className=\"title\">수량</dt>\n          <dd className=\"defines\">\n            <NumBtn minusOne={minusOne} plusOne={plusOne} numValue={numValue} />\n          </dd>\n        </dl>\n        <dl className=\"list\">\n          <dt className=\"title\">당도</dt>\n          <dt>{sugarLevel}</dt>\n        </dl>\n      </div>\n      <div className=\"totalPriceInfo\">\n        <p className=\"totalPriceTitle\">총 구매금액</p>\n        <p className=\"totalPrice\">{Math.round(totalPrice)}</p>\n      </div>\n      <div className=\"btnWrap\">\n        <div className=\"buyBtn\">\n          <Link\n            to={goCheckValid}\n            state={{\n              cartList: [\n                {\n                  product_id: productId,\n                  korean_name: koreanName,\n                  quantity: numValue,\n                  price: price,\n                  thumbnail_image_url: thumbnailImg,\n                },\n              ],\n            }}\n          >\n            <Button point={true} btnOnClick={tokenValid}>\n              바로구매\n            </Button>\n          </Link>\n        </div>\n        {cartAndLikeBtn && (\n          <div className=\"cartAndLikeBtn\">\n            <Button btnOnClick={addToCart}>\n              <i className=\"fas fa-shopping-cart\" />\n            </Button>\n            <button\n              className={is_like_True ? 'likeButton isLiked' : 'likeButton'}\n              onClick={onLikeButton}\n            >\n              <i className=\"far fa-heart\" />\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ProductInfoBox;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}