{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useLocation,useNavigate}from'react-router-dom';import queryString from'query-string';import{API_ADDRESS}from'../../../apiConfig';import OrderSheet from'./OrderSheet/OrderSheet';import Button from'../../../components/Button/Button';import'./OrderConfirm.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OrderConfirm=function OrderConfirm(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orderSheet=_useState2[0],setOrderSheet=_useState2[1];var user=orderSheet.user,address=orderSheet.address,order_items=orderSheet.order_items;var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),totalPrice=_useState4[0],setTotalPrice=_useState4[1];var location=useLocation();var navigate=useNavigate();var token=localStorage.getItem('TOKEN')||'';var _queryString$parse=queryString.parse(location.search),order=_queryString$parse.order;var fetchOrderSheetData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(API_ADDRESS.order_checkout+\"?id=\".concat(order),{headers:{Authorization:token}});case 2:data=_context.sent;_context.next=5;return data.json();case 5:res=_context.sent;setOrderSheet(res.order_list[0]);res.order_list[0].order_items.forEach(function(_ref2){var price=_ref2.price;return setTotalPrice(function(prev){return prev+price;});});case 8:case\"end\":return _context.stop();}}},_callee);}));return function fetchOrderSheetData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchOrderSheetData();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"orderConfirm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pageTitleArea\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"progressNav\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"progress\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"step\",children:/*#__PURE__*/_jsx(\"p\",{children:\"01 \\uC7A5\\uBC14\\uAD6C\\uB2C8\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"step\",children:/*#__PURE__*/_jsx(\"p\",{children:\"02 \\uACB0\\uC81C\\uC9C4\\uD589\"})}),/*#__PURE__*/_jsxs(\"li\",{className:\"step\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"03 \\uC8FC\\uBB38\\uC644\\uB8CC\"}),/*#__PURE__*/_jsx(\"span\",{className:\"line\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"pageTitle\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"confirmTitle\",children:\"\\uC8FC\\uBB38 \\uC644\\uB8CC\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pageContent\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"orderConfirmMessage\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"userName\",children:user}),\"\\uB2D8\\uC5D0\\uAC8C \\uCC98\\uBC29\\uB41C \\uB514\\uC800\\uD2B8\\uAC00 \\uBC30\\uC1A1\\uB420 \\uC608\\uC815\\uC785\\uB2C8\\uB2E4!\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"orderAddressMessage\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uBC30\\uC1A1\\uC9C0 : \",/*#__PURE__*/_jsx(\"p\",{className:\"address\",children:address})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"sheetContainer\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"goodsTable\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"goodsTableHead\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"tableHeadElement tableHeadImage\"}),/*#__PURE__*/_jsx(\"th\",{className:\"tableHeadElement tableHeadGoods\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uC0C1\\uD488\"})}),/*#__PURE__*/_jsx(\"th\",{className:\"tableHeadElement tableHeadQuantity\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uC218\\uB7C9\"})})]})}),order_items&&order_items.map(function(product){return/*#__PURE__*/_jsx(OrderSheet,{product:product},product.product_id);})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"totalPrice\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"priceContents\",children:[\"\\uCD1D\",/*#__PURE__*/_jsxs(\"p\",{className:\"price\",children:[\" \",Math.round(totalPrice),\" \"]}),\" \\uC6D0\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"continueButtonContainer\",children:/*#__PURE__*/_jsx(Button,{btnOnClick:function btnOnClick(){return navigate('/product-list');},children:\"\\uC1FC\\uD551 \\uACC4\\uC18D\\uD558\\uAE30\"})})]})]});};export default OrderConfirm;","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","queryString","API_ADDRESS","OrderSheet","Button","jsx","_jsx","jsxs","_jsxs","OrderConfirm","_useState","_useState2","_slicedToArray","orderSheet","setOrderSheet","user","address","order_items","_useState3","_useState4","totalPrice","setTotalPrice","location","navigate","token","localStorage","getItem","_queryString$parse","parse","search","order","fetchOrderSheetData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","res","wrap","_callee$","_context","prev","next","fetch","order_checkout","concat","headers","Authorization","sent","json","order_list","forEach","_ref2","price","stop","apply","arguments","className","children","map","product","product_id","Math","round","btnOnClick"],"sources":["C:/Users/user/Desktop/2차프로젝트/DrTart-frontend/src/pages/Order/OrderConfirm/OrderConfirm.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport queryString from 'query-string';\nimport { API_ADDRESS } from '../../../apiConfig';\nimport OrderSheet from './OrderSheet/OrderSheet';\nimport Button from '../../../components/Button/Button';\nimport './OrderConfirm.scss';\n\nconst OrderConfirm = () => {\n  const [orderSheet, setOrderSheet] = useState([]);\n  const { user, address, order_items } = orderSheet;\n  const [totalPrice, setTotalPrice] = useState(0);\n  const location = useLocation();\n  const navigate = useNavigate();\n  let token = localStorage.getItem('TOKEN') || '';\n  const { order } = queryString.parse(location.search);\n\n  const fetchOrderSheetData = async () => {\n    const data = await fetch(API_ADDRESS.order_checkout + `?id=${order}`, {\n      headers: { Authorization: token },\n    });\n    const res = await data.json();\n    setOrderSheet(res.order_list[0]);\n    res.order_list[0].order_items.forEach(({ price }) =>\n      setTotalPrice(prev => prev + price)\n    );\n  };\n\n  useEffect(() => {\n    fetchOrderSheetData();\n  }, []);\n\n  return (\n    <div className=\"orderConfirm\">\n      <div className=\"pageTitleArea\">\n        <div className=\"progressNav\">\n          <ul className=\"progress\">\n            <li className=\"step\">\n              <p>01 장바구니</p>\n            </li>\n            <li className=\"step\">\n              <p>02 결제진행</p>\n            </li>\n            <li className=\"step\">\n              <p>03 주문완료</p>\n              <span className=\"line\" />\n            </li>\n          </ul>\n        </div>\n        <div className=\"pageTitle\">\n          <h1 className=\"confirmTitle\">주문 완료</h1>\n        </div>\n      </div>\n      <div className=\"pageContent\">\n        <div className=\"orderConfirmMessage\">\n          <h3>\n            <p className=\"userName\">{user}</p>님에게 처방된 디저트가 배송될\n            예정입니다!\n          </h3>\n        </div>\n        <div className=\"orderAddressMessage\">\n          <h3>\n            배송지 : <p className=\"address\">{address}</p>\n          </h3>\n        </div>\n        <div className=\"sheetContainer\">\n          <table className=\"goodsTable\">\n            <thead className=\"goodsTableHead\">\n              <tr>\n                <th className=\"tableHeadElement tableHeadImage\" />\n                <th className=\"tableHeadElement tableHeadGoods\">\n                  <p>상품</p>\n                </th>\n                <th className=\"tableHeadElement tableHeadQuantity\">\n                  <p>수량</p>\n                </th>\n              </tr>\n            </thead>\n            {order_items &&\n              order_items.map(product => (\n                <OrderSheet key={product.product_id} product={product} />\n              ))}\n          </table>\n        </div>\n        <div className=\"totalPrice\">\n          <h3 className=\"priceContents\">\n            총<p className=\"price\"> {Math.round(totalPrice)} </p> 원\n          </h3>\n        </div>\n        <div className=\"continueButtonContainer\">\n          <Button btnOnClick={() => navigate('/product-list')}>\n            쇼핑 계속하기\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default OrderConfirm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}