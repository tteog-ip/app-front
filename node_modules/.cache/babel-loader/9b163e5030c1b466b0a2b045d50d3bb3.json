{"ast":null,"code":"import _objectSpread from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useParams}from'react-router';import SlickThumbnail from'./SlickThumbnail';import ProductListNav from'../ProductList/ProductListNav/ProductListNav';import ProductReview from'./ProductReview/ProductReview';import ProductInfoBox from'../../components/ProductInfoBox/ProductInfoBox';import{API_ADDRESS}from'../../apiConfig';import'./ProductDetail.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProductDetail(){var params=useParams();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),currentIndex=_useState4[0],setCurrentIndex=_useState4[1];var updateProductLiked=function updateProductLiked(){var updatedProduct=_objectSpread(_objectSpread({},data),{},{is_like_True:!data.is_like_True});setData(updatedProduct);};useEffect(function(){window.scrollTo(0,0);},[]);useEffect(function(){fetch(API_ADDRESS.products+params.id).then(function(res){return res.json();}).then(function(res){setData(res.product_list);});},[params.id]);useEffect(function(){var slideInterval=setInterval(function(){var _data$image_list;currentIndex>=((_data$image_list=data.image_list)===null||_data$image_list===void 0?void 0:_data$image_list.length)-1||0?setCurrentIndex(0):setCurrentIndex(function(prev){return prev+1;});},4000);return function(){clearInterval(slideInterval);};},[currentIndex,data]);var _changeSlide=function changeSlide(index){setCurrentIndex(index);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ProductListNav,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"slideAndInfoWrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"slide\",children:[data.image_list&&data.image_list.filter(function(el,index){return index===currentIndex;}).map(function(el){return/*#__PURE__*/_jsx(\"div\",{className:\"imgSlide\",children:/*#__PURE__*/_jsx(\"img\",{src:el.url,alt:el.id,className:\"img\"})},el.id);}),/*#__PURE__*/_jsx(\"ul\",{className:\"thumbnailWrap\",children:data.image_list&&data.image_list.map(function(el,index){return/*#__PURE__*/_jsx(SlickThumbnail,{currentSlideId:currentIndex,slideId:index,imgUrl:el.url,changeSlide:function changeSlide(){return _changeSlide(index);}},el.id);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"productInfo\",children:/*#__PURE__*/_jsx(ProductInfoBox,{productId:params.id,koreanName:data.korean_name,sugarLevel:data.sugar_level,price:data.price,infoTag:data.description,isVegan:data.vegan_or_not,thumbnailImg:data.thumbnail_image_url,cartAndLikeBtn:true,is_like_True:data.is_like_True,updateProductLiked:updateProductLiked})})]}),/*#__PURE__*/_jsx(ProductReview,{})]});}","map":{"version":3,"sources":["C:/Users/user/Desktop/2차프로젝트/DrTart-frontend/src/pages/ProductDetail/ProductDetail.js"],"names":["React","useState","useEffect","useParams","SlickThumbnail","ProductListNav","ProductReview","ProductInfoBox","API_ADDRESS","ProductDetail","params","data","setData","currentIndex","setCurrentIndex","updateProductLiked","updatedProduct","is_like_True","window","scrollTo","fetch","products","id","then","res","json","product_list","slideInterval","setInterval","image_list","length","prev","clearInterval","changeSlide","index","filter","el","map","url","korean_name","sugar_level","price","description","vegan_or_not","thumbnail_image_url"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router';\nimport SlickThumbnail from './SlickThumbnail';\nimport ProductListNav from '../ProductList/ProductListNav/ProductListNav';\nimport ProductReview from './ProductReview/ProductReview';\nimport ProductInfoBox from '../../components/ProductInfoBox/ProductInfoBox';\nimport { API_ADDRESS } from '../../apiConfig';\nimport './ProductDetail.scss';\n\nexport default function ProductDetail() {\n  const params = useParams();\n  const [data, setData] = useState({});\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  const updateProductLiked = () => {\n    const updatedProduct = { ...data, is_like_True: !data.is_like_True };\n\n    setData(updatedProduct);\n  };\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n\n  useEffect(() => {\n    fetch(API_ADDRESS.products + params.id)\n      .then(res => res.json())\n      .then(res => {\n        setData(res.product_list);\n      });\n  }, [params.id]);\n\n  useEffect(() => {\n    const slideInterval = setInterval(() => {\n      currentIndex >= data.image_list?.length - 1 || 0\n        ? setCurrentIndex(0)\n        : setCurrentIndex(prev => prev + 1);\n    }, 4000);\n\n    return () => {\n      clearInterval(slideInterval);\n    };\n  }, [currentIndex, data]);\n\n  const changeSlide = index => {\n    setCurrentIndex(index);\n  };\n\n  return (\n    <>\n      <ProductListNav />\n      <div className=\"slideAndInfoWrap\">\n        <div className=\"slide\">\n          {data.image_list &&\n            data.image_list\n              .filter((el, index) => index === currentIndex)\n              .map(el => (\n                <div className=\"imgSlide\" key={el.id}>\n                  <img src={el.url} alt={el.id} className=\"img\" />\n                </div>\n              ))}\n          <ul className=\"thumbnailWrap\">\n            {data.image_list &&\n              data.image_list.map((el, index) => (\n                <SlickThumbnail\n                  key={el.id}\n                  currentSlideId={currentIndex}\n                  slideId={index}\n                  imgUrl={el.url}\n                  changeSlide={() => changeSlide(index)}\n                />\n              ))}\n          </ul>\n        </div>\n        <div className=\"productInfo\">\n          <ProductInfoBox\n            productId={params.id}\n            koreanName={data.korean_name}\n            sugarLevel={data.sugar_level}\n            price={data.price}\n            infoTag={data.description}\n            isVegan={data.vegan_or_not}\n            thumbnailImg={data.thumbnail_image_url}\n            cartAndLikeBtn={true}\n            is_like_True={data.is_like_True}\n            updateProductLiked={updateProductLiked}\n          />\n        </div>\n      </div>\n      <ProductReview />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}