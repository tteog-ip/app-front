{"ast":null,"code":"import _slicedToArray from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Link,useNavigate}from'react-router-dom';import NumBtn from'../ProductInfoBox/NumBtn/NumBtn';import Button from'../Button/Button';import{API_ADDRESS}from'../../apiConfig';import'../ProductInfoBox/ProductInfoBox.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductInfoBox=function ProductInfoBox(_ref){var productId=_ref.productId,koreanName=_ref.koreanName,sugarLevel=_ref.sugarLevel,price=_ref.price,infoTag=_ref.infoTag,isVegan=_ref.isVegan,is_like_True=_ref.is_like_True,cartAndLikeBtn=_ref.cartAndLikeBtn,thumbnailImg=_ref.thumbnailImg,updateProductLiked=_ref.updateProductLiked;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),numValue=_useState2[0],setNumValue=_useState2[1];var token=localStorage.getItem('TOKEN');var minusOne=function minusOne(){numValue===1?setNumValue(1):setNumValue(numValue-1);};var plusOne=function plusOne(){setNumValue(numValue+1);};var tokenValid=function tokenValid(){return token?'':alert('로그인이 필요합니다.');};var goCheckValid=token?'/order/check':'/login';var totalPrice=price*numValue;var navigate=useNavigate();function goToCart(){if(window.confirm('장바구니로 이동하시겠습니까?'))navigate('/order/cart');else return;}var addToCart=function addToCart(){if(token){fetch(API_ADDRESS.order_cart,{method:'POST',headers:{Authorization:token},body:JSON.stringify({product_id:productId,quantity:numValue})}).then(function(response){return response.json();}).then(function(result){return result.message==='SUCCESS'&&goToCart();});}else{alert('로그인이 필요합니다.');navigate('/login');}};var onLikeButton=function onLikeButton(){fetch(API_ADDRESS.products_like,{method:'POST',headers:{Authorization:token},body:JSON.stringify({product_id:productId})});updateProductLiked(productId);};return/*#__PURE__*/_jsxs(\"div\",{className:\"productInfoBox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stickerWrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stickerBest\",children:\"BEST\"}),isVegan&&/*#__PURE__*/_jsx(\"div\",{className:\"stickerVegan\",children:\"VEGAN\"})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"productName\",children:koreanName}),/*#__PURE__*/_jsx(\"p\",{className:\"infoTag\",children:infoTag}),/*#__PURE__*/_jsx(\"div\",{className:\"price\",children:/*#__PURE__*/_jsx(\"p\",{className:\"originPrice\",children:Math.round(price)})}),/*#__PURE__*/_jsx(\"ul\",{className:\"tabBar\",children:/*#__PURE__*/_jsx(\"li\",{className:\"infoToBuy\",children:\"\\uAD6C\\uB9E4\\uC815\\uBCF4\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"tabContents\",children:[/*#__PURE__*/_jsxs(\"dl\",{className:\"list\",children:[/*#__PURE__*/_jsx(\"dt\",{className:\"title\",children:\"\\uC218\\uB7C9\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"defines\",children:/*#__PURE__*/_jsx(NumBtn,{minusOne:minusOne,plusOne:plusOne,numValue:numValue})})]}),/*#__PURE__*/_jsxs(\"dl\",{className:\"list\",children:[/*#__PURE__*/_jsx(\"dt\",{className:\"title\",children:\"\\uB2F9\\uB3C4\"}),/*#__PURE__*/_jsx(\"dt\",{children:sugarLevel})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"totalPriceInfo\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"totalPriceTitle\",children:\"\\uCD1D \\uAD6C\\uB9E4\\uAE08\\uC561\"}),/*#__PURE__*/_jsx(\"p\",{className:\"totalPrice\",children:Math.round(totalPrice)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btnWrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"buyBtn\",children:/*#__PURE__*/_jsx(Link,{to:goCheckValid,state:{cartList:[{product_id:productId,korean_name:koreanName,quantity:numValue,price:price,thumbnail_image_url:thumbnailImg}]},children:/*#__PURE__*/_jsx(Button,{point:true,btnOnClick:tokenValid,children:\"\\uBC14\\uB85C\\uAD6C\\uB9E4\"})})}),cartAndLikeBtn&&/*#__PURE__*/_jsxs(\"div\",{className:\"cartAndLikeBtn\",children:[/*#__PURE__*/_jsx(Button,{btnOnClick:addToCart,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-shopping-cart\"})}),/*#__PURE__*/_jsx(\"button\",{className:is_like_True?'likeButton isLiked':'likeButton',onClick:onLikeButton,children:/*#__PURE__*/_jsx(\"i\",{className:\"far fa-heart\"})})]})]})]});};export default ProductInfoBox;","map":{"version":3,"sources":["C:/Users/user/Desktop/2차프로젝트/DrTart-frontend/src/components/ProductInfoBox/ProductInfoBox.js"],"names":["React","useState","Link","useNavigate","NumBtn","Button","API_ADDRESS","ProductInfoBox","productId","koreanName","sugarLevel","price","infoTag","isVegan","is_like_True","cartAndLikeBtn","thumbnailImg","updateProductLiked","numValue","setNumValue","token","localStorage","getItem","minusOne","plusOne","tokenValid","alert","goCheckValid","totalPrice","navigate","goToCart","window","confirm","addToCart","fetch","order_cart","method","headers","Authorization","body","JSON","stringify","product_id","quantity","then","response","json","result","message","onLikeButton","products_like","Math","round","cartList","korean_name","thumbnail_image_url"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport NumBtn from '../ProductInfoBox/NumBtn/NumBtn';\nimport Button from '../Button/Button';\nimport { API_ADDRESS } from '../../apiConfig';\nimport '../ProductInfoBox/ProductInfoBox.scss';\n\nconst ProductInfoBox = ({\n  productId,\n  koreanName,\n  sugarLevel,\n  price,\n  infoTag,\n  isVegan,\n  is_like_True,\n  cartAndLikeBtn,\n  thumbnailImg,\n  updateProductLiked,\n}) => {\n  const [numValue, setNumValue] = useState(1);\n  let token = localStorage.getItem('TOKEN');\n\n  const minusOne = () => {\n    numValue === 1 ? setNumValue(1) : setNumValue(numValue - 1);\n  };\n\n  const plusOne = () => {\n    setNumValue(numValue + 1);\n  };\n\n  const tokenValid = () => {\n    return token ? '' : alert('로그인이 필요합니다.');\n  };\n  const goCheckValid = token ? '/order/check' : '/login';\n\n  const totalPrice = price * numValue;\n\n  const navigate = useNavigate();\n\n  function goToCart() {\n    if (window.confirm('장바구니로 이동하시겠습니까?')) navigate('/order/cart');\n    else return;\n  }\n\n  const addToCart = () => {\n    if (token) {\n      fetch(API_ADDRESS.order_cart, {\n        method: 'POST',\n        headers: {\n          Authorization: token,\n        },\n        body: JSON.stringify({\n          product_id: productId,\n          quantity: numValue,\n        }),\n      })\n        .then(response => response.json())\n        .then(result => result.message === 'SUCCESS' && goToCart());\n    } else {\n      alert('로그인이 필요합니다.');\n      navigate('/login');\n    }\n  };\n\n  const onLikeButton = () => {\n    fetch(API_ADDRESS.products_like, {\n      method: 'POST',\n      headers: {\n        Authorization: token,\n      },\n      body: JSON.stringify({\n        product_id: productId,\n      }),\n    });\n    updateProductLiked(productId);\n  };\n\n  return (\n    <div className=\"productInfoBox\">\n      <div className=\"stickerWrap\">\n        <div className=\"stickerBest\">BEST</div>\n        {isVegan && <div className=\"stickerVegan\">VEGAN</div>}\n      </div>\n      <h3 className=\"productName\">{koreanName}</h3>\n      <p className=\"infoTag\">{infoTag}</p>\n      <div className=\"price\">\n        <p className=\"originPrice\">{Math.round(price)}</p>\n      </div>\n      <ul className=\"tabBar\">\n        <li className=\"infoToBuy\">구매정보</li>\n      </ul>\n      <div className=\"tabContents\">\n        <dl className=\"list\">\n          <dt className=\"title\">수량</dt>\n          <dd className=\"defines\">\n            <NumBtn minusOne={minusOne} plusOne={plusOne} numValue={numValue} />\n          </dd>\n        </dl>\n        <dl className=\"list\">\n          <dt className=\"title\">당도</dt>\n          <dt>{sugarLevel}</dt>\n        </dl>\n      </div>\n      <div className=\"totalPriceInfo\">\n        <p className=\"totalPriceTitle\">총 구매금액</p>\n        <p className=\"totalPrice\">{Math.round(totalPrice)}</p>\n      </div>\n      <div className=\"btnWrap\">\n        <div className=\"buyBtn\">\n          <Link\n            to={goCheckValid}\n            state={{\n              cartList: [\n                {\n                  product_id: productId,\n                  korean_name: koreanName,\n                  quantity: numValue,\n                  price: price,\n                  thumbnail_image_url: thumbnailImg,\n                },\n              ],\n            }}\n          >\n            <Button point={true} btnOnClick={tokenValid}>\n              바로구매\n            </Button>\n          </Link>\n        </div>\n        {cartAndLikeBtn && (\n          <div className=\"cartAndLikeBtn\">\n            <Button btnOnClick={addToCart}>\n              <i className=\"fas fa-shopping-cart\" />\n            </Button>\n            <button\n              className={is_like_True ? 'likeButton isLiked' : 'likeButton'}\n              onClick={onLikeButton}\n            >\n              <i className=\"far fa-heart\" />\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ProductInfoBox;\n"]},"metadata":{},"sourceType":"module"}