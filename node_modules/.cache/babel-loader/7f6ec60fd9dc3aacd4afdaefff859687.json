{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Product from'../Product/Product';import ImageSlide from'./ImageSlide/ImageSlide';import ModalBuyNow from'../ModalBuyNow/ModalBuyNow';import{API_ADDRESS}from'../../../apiConfig';import'./ProductsMain.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductsMain(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isProductMainLoading=_useState2[0],setIsProductMainLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),productsList=_useState4[0],setProductsList=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isPopModal=_useState6[0],setIsPopModal=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),selectedProduct=_useState8[0],setSelectedProduct=_useState8[1];var PopUpModalBuyNow=function PopUpModalBuyNow(product){setIsPopModal(true);setSelectedProduct(product);};var updateLike=function updateLike(id){var updatedList=productsList.map(function(product){if(id===product.id){return product.is_like_True?_objectSpread(_objectSpread({},product),{},{is_like_True:!product.is_like_True,like_num:product.like_num-1}):_objectSpread(_objectSpread({},product),{},{is_like_True:!product.is_like_True,like_num:product.like_num+1});}else{return _objectSpread({},product);}});setProductsList(updatedList);};var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(API_ADDRESS.product_main);case 2:data=_context.sent;_context.next=5;return data.json();case 5:res=_context.sent;setProductsList(res.product_list);case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setIsProductMainLoading(true);_context2.next=3;return fetchData();case 3:setIsProductMainLoading(false);case 4:case\"end\":return _context2.stop();}}},_callee2);}))();},[]);return!isProductMainLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"productsMain\",children:[isPopModal&&/*#__PURE__*/_jsx(ModalBuyNow,{setIsPopModal:setIsPopModal,infoTag:productsList.description,product:selectedProduct}),/*#__PURE__*/_jsx(\"div\",{className:isPopModal?'mask':'maskOff'}),/*#__PURE__*/_jsx(ImageSlide,{}),/*#__PURE__*/_jsx(\"div\",{className:\"productListHead\",children:\"\\uBCA0\\uC2A4\\uD2B8\\uC140\\uB7EC TOP 5\"}),/*#__PURE__*/_jsx(\"div\",{className:\"productListContainer\",children:productsList.map(function(el){return/*#__PURE__*/_jsx(Product,{el:el,id:el.id,btnOnClick:PopUpModalBuyNow,updateLike:updateLike},el.id);})})]});}export default ProductsMain;","map":{"version":3,"sources":["C:/Users/user/Desktop/2차프로젝트/DrTart-frontend/src/pages/ProductList/ProductsMain/ProductsMain.js"],"names":["React","useEffect","useState","Product","ImageSlide","ModalBuyNow","API_ADDRESS","ProductsMain","isProductMainLoading","setIsProductMainLoading","productsList","setProductsList","isPopModal","setIsPopModal","selectedProduct","setSelectedProduct","PopUpModalBuyNow","product","updateLike","id","updatedList","map","is_like_True","like_num","fetchData","fetch","product_main","data","json","res","product_list","description","el"],"mappings":"4uBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,OAAP,KAAoB,oBAApB,CACA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,4BAAxB,CACA,OAASC,WAAT,KAA4B,oBAA5B,CACA,MAAO,qBAAP,C,wFAEA,QAASC,CAAAA,YAAT,EAAwB,CACtB,cAAwDL,QAAQ,CAAC,KAAD,CAAhE,wCAAOM,oBAAP,eAA6BC,uBAA7B,eACA,eAAwCP,QAAQ,CAAC,EAAD,CAAhD,yCAAOQ,YAAP,eAAqBC,eAArB,eACA,eAAoCT,QAAQ,CAAC,KAAD,CAA5C,yCAAOU,UAAP,eAAmBC,aAAnB,eACA,eAA8CX,QAAQ,CAAC,EAAD,CAAtD,yCAAOY,eAAP,eAAwBC,kBAAxB,eAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAAAC,OAAO,CAAI,CAClCJ,aAAa,CAAC,IAAD,CAAb,CACAE,kBAAkB,CAACE,OAAD,CAAlB,CACD,CAHD,CAKA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAAC,EAAE,CAAI,CACvB,GAAMC,CAAAA,WAAW,CAAGV,YAAY,CAACW,GAAb,CAAiB,SAAAJ,OAAO,CAAI,CAC9C,GAAIE,EAAE,GAAKF,OAAO,CAACE,EAAnB,CAAuB,CACrB,MAAOF,CAAAA,OAAO,CAACK,YAAR,gCAEEL,OAFF,MAGDK,YAAY,CAAE,CAACL,OAAO,CAACK,YAHtB,CAIDC,QAAQ,CAAEN,OAAO,CAACM,QAAR,CAAmB,CAJ5B,kCAOEN,OAPF,MAQDK,YAAY,CAAE,CAACL,OAAO,CAACK,YARtB,CASDC,QAAQ,CAAEN,OAAO,CAACM,QAAR,CAAmB,CAT5B,EAAP,CAWD,CAZD,IAYO,CACL,wBAAYN,OAAZ,EACD,CACF,CAhBmB,CAApB,CAkBAN,eAAe,CAACS,WAAD,CAAf,CACD,CApBD,CAsBA,GAAMI,CAAAA,SAAS,0FAAG,sKACGC,CAAAA,KAAK,CAACnB,WAAW,CAACoB,YAAb,CADR,QACVC,IADU,qCAEEA,CAAAA,IAAI,CAACC,IAAL,EAFF,QAEVC,GAFU,eAGhBlB,eAAe,CAACkB,GAAG,CAACC,YAAL,CAAf,CAHgB,sDAAH,kBAATN,CAAAA,SAAS,0CAAf,CAMAvB,SAAS,CAAC,UAAM,CACd,wDAAC,wIACCQ,uBAAuB,CAAC,IAAD,CAAvB,CADD,uBAEOe,CAAAA,SAAS,EAFhB,QAGCf,uBAAuB,CAAC,KAAD,CAAvB,CAHD,wDAAD,KAKD,CANQ,CAMN,EANM,CAAT,CAQA,MACE,CAACD,oBAAD,eACE,aAAK,SAAS,CAAC,cAAf,WACGI,UAAU,eACT,KAAC,WAAD,EACE,aAAa,CAAEC,aADjB,CAEE,OAAO,CAAEH,YAAY,CAACqB,WAFxB,CAGE,OAAO,CAAEjB,eAHX,EAFJ,cAQE,YAAK,SAAS,CAAEF,UAAU,CAAG,MAAH,CAAY,SAAtC,EARF,cASE,KAAC,UAAD,IATF,cAUE,YAAK,SAAS,CAAC,iBAAf,kDAVF,cAWE,YAAK,SAAS,CAAC,sBAAf,UACGF,YAAY,CAACW,GAAb,CAAiB,SAAAW,EAAE,qBAClB,KAAC,OAAD,EACE,EAAE,CAAEA,EADN,CAGE,EAAE,CAAEA,EAAE,CAACb,EAHT,CAIE,UAAU,CAAEH,gBAJd,CAKE,UAAU,CAAEE,UALd,EAEOc,EAAE,CAACb,EAFV,CADkB,EAAnB,CADH,EAXF,GAFJ,CA2BD,CAED,cAAeZ,CAAAA,YAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Product from '../Product/Product';\nimport ImageSlide from './ImageSlide/ImageSlide';\nimport ModalBuyNow from '../ModalBuyNow/ModalBuyNow';\nimport { API_ADDRESS } from '../../../apiConfig';\nimport './ProductsMain.scss';\n\nfunction ProductsMain() {\n  const [isProductMainLoading, setIsProductMainLoading] = useState(false);\n  const [productsList, setProductsList] = useState([]);\n  const [isPopModal, setIsPopModal] = useState(false);\n  const [selectedProduct, setSelectedProduct] = useState({});\n\n  const PopUpModalBuyNow = product => {\n    setIsPopModal(true);\n    setSelectedProduct(product);\n  };\n\n  const updateLike = id => {\n    const updatedList = productsList.map(product => {\n      if (id === product.id) {\n        return product.is_like_True\n          ? {\n              ...product,\n              is_like_True: !product.is_like_True,\n              like_num: product.like_num - 1,\n            }\n          : {\n              ...product,\n              is_like_True: !product.is_like_True,\n              like_num: product.like_num + 1,\n            };\n      } else {\n        return { ...product };\n      }\n    });\n\n    setProductsList(updatedList);\n  };\n\n  const fetchData = async () => {\n    const data = await fetch(API_ADDRESS.product_main);\n    const res = await data.json();\n    setProductsList(res.product_list);\n  };\n\n  useEffect(() => {\n    (async () => {\n      setIsProductMainLoading(true);\n      await fetchData();\n      setIsProductMainLoading(false);\n    })();\n  }, []);\n\n  return (\n    !isProductMainLoading && (\n      <div className=\"productsMain\">\n        {isPopModal && (\n          <ModalBuyNow\n            setIsPopModal={setIsPopModal}\n            infoTag={productsList.description}\n            product={selectedProduct}\n          />\n        )}\n        <div className={isPopModal ? 'mask' : 'maskOff'} />\n        <ImageSlide />\n        <div className=\"productListHead\">베스트셀러 TOP 5</div>\n        <div className=\"productListContainer\">\n          {productsList.map(el => (\n            <Product\n              el={el}\n              key={el.id}\n              id={el.id}\n              btnOnClick={PopUpModalBuyNow}\n              updateLike={updateLike}\n            />\n          ))}\n        </div>\n      </div>\n    )\n  );\n}\n\nexport default ProductsMain;\n"]},"metadata":{},"sourceType":"module"}