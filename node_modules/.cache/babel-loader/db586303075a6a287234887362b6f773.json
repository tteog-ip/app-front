{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useEffect,useState}from'react';import{Link,useLocation,useParams,useNavigate}from'react-router-dom';import Button from'../../../components/Button/Button';import Goods from'../Goods/Goods';import{API_ADDRESS}from'../../../apiConfig';import'../Order.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OrderList=function OrderList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orderList=_useState2[0],setOrderList=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOrderLoading=_useState4[0],setIsOrderLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isTermsChecked=_useState6[0],setIsTermsChecked=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalPrice=_useState8[0],setTotalPrice=_useState8[1];var _useParams=useParams(),pageType=_useParams.pageType;var location=useLocation();var navigate=useNavigate();var token=localStorage.getItem('TOKEN')||'';var fetchOrderData=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(API_ADDRESS.order_list,{headers:{Authorization:token}});case 2:data=_context.sent;_context.next=5;return data.json();case 5:res=_context.sent;if(res.order_list){setOrderList(function(){return res.order_list;});}else{setOrderList(function(){return[];});}case 7:case\"end\":return _context.stop();}}},_callee);})),[token]);useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setIsOrderLoading(true);_context2.next=3;return fetchOrderData();case 3:setIsOrderLoading(false);case 4:case\"end\":return _context2.stop();}}},_callee2);}))();},[fetchOrderData]);/*\n  const deleteGoods = id => {\n    const [targetToDelete] = cartList.filter(product => product.cart_id === id);\n    setCartList(cartList.filter(product => product.cart_id !== id));\n\n    fetch(API_ADDRESS.order_list, {\n      method: 'DELETE',\n      headers: {\n        Authorization: token,\n      },\n      body: JSON.stringify({\n        cart: id,\n      }),\n    });\n  };\n  */var onOrder=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var orderTable;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:orderTable=orderList.map(function(product){return{product_id:product.product_id,quantity:product.quantity};});_context3.next=3;return fetch(API_ADDRESS.order_list,{method:'POST',headers:{Authorization:token},body:JSON.stringify(orderTable)});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function onOrder(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"order\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pageTitleArea\",children:/*#__PURE__*/_jsx(\"div\",{className:\"pageTitle\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"orderTitle\",children:\"\\uC8FC\\uBB38\\uB0B4\\uC5ED\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"pageContent\",children:/*#__PURE__*/_jsx(\"section\",{className:\"productSection\",children:orderList.length?!isOrderLoading&&/*#__PURE__*/_jsx(\"table\",{className:\"goodsTable\",children:/*#__PURE__*/_jsx(\"thead\",{className:\"goodsTableHead\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"tableHeadElement tableHeadImage\"}),/*#__PURE__*/_jsx(\"th\",{className:\"tableHeadElement tableHeadGoods\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uC0C1\\uD488\"})}),/*#__PURE__*/_jsx(\"th\",{className:\"tableHeadElement tableHeadQuantity\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uC218\\uB7C9\"})}),/*#__PURE__*/_jsx(\"th\",{className:\"tableHeadElement tableHeadPrice\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uAE08\\uC561\"})}),/*#__PURE__*/_jsx(\"th\",{className:\"tableHeadElement tableHeadButton\"})]})})}):/*#__PURE__*/_jsx(\"div\",{className:\"nullContentTable\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uC8FC\\uBB38\\uD55C \\uB0B4\\uC5ED\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"})})})})]});};export default OrderList;","map":{"version":3,"sources":["C:/Users/user/Desktop/2차프로젝트/DrTart-frontend/src/pages/Order/OrderList/OrderList.js"],"names":["React","useCallback","useEffect","useState","Link","useLocation","useParams","useNavigate","Button","Goods","API_ADDRESS","OrderList","orderList","setOrderList","isOrderLoading","setIsOrderLoading","isTermsChecked","setIsTermsChecked","totalPrice","setTotalPrice","pageType","location","navigate","token","localStorage","getItem","fetchOrderData","fetch","order_list","headers","Authorization","data","json","res","onOrder","orderTable","map","product","product_id","quantity","method","body","JSON","stringify","length"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport { Link, useLocation, useParams, useNavigate } from 'react-router-dom';\nimport Button from '../../../components/Button/Button';\nimport Goods from '../Goods/Goods';\nimport { API_ADDRESS } from '../../../apiConfig';\nimport '../Order.scss';\n\nconst OrderList = () => {\n  const [orderList, setOrderList] = useState([]);\n  const [isOrderLoading, setIsOrderLoading] = useState(false);\n  const [isTermsChecked, setIsTermsChecked] = useState(false);\n  const [totalPrice, setTotalPrice] = useState(0);\n  const { pageType } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n  let token = localStorage.getItem('TOKEN') || '';\n\n  const fetchOrderData = useCallback(async () => {\n    const data = await fetch(API_ADDRESS.order_list, {\n      headers: { Authorization: token },\n    });\n    const res = await data.json();\n    if (res.order_list) {\n      setOrderList(() => res.order_list);\n    } else {\n      setOrderList(() => []);\n    }\n  }, [token]);\n\n  useEffect(() => {\n    (async () => {\n      setIsOrderLoading(true);\n      await fetchOrderData();\n      setIsOrderLoading(false);\n    })();\n  }, [fetchOrderData]);\n  /*\n  const deleteGoods = id => {\n    const [targetToDelete] = cartList.filter(product => product.cart_id === id);\n    setCartList(cartList.filter(product => product.cart_id !== id));\n\n    fetch(API_ADDRESS.order_list, {\n      method: 'DELETE',\n      headers: {\n        Authorization: token,\n      },\n      body: JSON.stringify({\n        cart: id,\n      }),\n    });\n  };\n  */\n  const onOrder = async () => {\n    const orderTable = orderList.map(product => ({\n      product_id: product.product_id,\n      quantity: product.quantity,\n    }));\n    await fetch(API_ADDRESS.order_list, {\n      method: 'POST',\n      headers: {\n        Authorization: token,\n      },\n      body: JSON.stringify(orderTable),\n    });\n  };\n\n  return (\n    <div className=\"order\">\n      <div className=\"pageTitleArea\">\n        <div className=\"pageTitle\">\n          <h1 className=\"orderTitle\">주문내역</h1>\n        </div>\n      </div>\n      <div className=\"pageContent\">\n        <section className=\"productSection\">\n          {orderList.length ? (\n            !isOrderLoading && (\n              <table className=\"goodsTable\">\n                <thead className=\"goodsTableHead\">\n                  <tr>\n                    <th className=\"tableHeadElement tableHeadImage\" />\n                    <th className=\"tableHeadElement tableHeadGoods\">\n                      <p>상품</p>\n                    </th>\n                    <th className=\"tableHeadElement tableHeadQuantity\">\n                      <p>수량</p>\n                    </th>\n                    <th className=\"tableHeadElement tableHeadPrice\">\n                      <p>금액</p>\n                    </th>\n                    <th className=\"tableHeadElement tableHeadButton\" />\n                  </tr>\n                </thead>\n              </table>\n            )\n          ) : (\n            <div className=\"nullContentTable\">\n              <p>주문한 내역이 없습니다.</p>\n            </div>\n          )}\n        </section>\n      </div>\n    </div>\n  );\n};\nexport default OrderList;\n"]},"metadata":{},"sourceType":"module"}