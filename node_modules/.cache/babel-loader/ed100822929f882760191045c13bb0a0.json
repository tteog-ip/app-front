{"ast":null,"code":"import _objectSpread from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useParams}from'react-router';import SlickThumbnail from'./SlickThumbnail';import ProductListNav from'../ProductList/ProductListNav/ProductListNav';import ProductReview from'./ProductReview/ProductReview';import ProductInfoBox from'../../components/ProductInfoBox/ProductInfoBox';import{API_ADDRESS}from'../../apiConfig';import'./ProductDetail.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProductDetail(){var params=useParams();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),currentIndex=_useState4[0],setCurrentIndex=_useState4[1];var updateProductLiked=function updateProductLiked(){var updatedProduct=_objectSpread(_objectSpread({},data),{},{is_like_True:!data.is_like_True});setData(updatedProduct);};useEffect(function(){window.scrollTo(0,0);},[]);useEffect(function(){fetch(API_ADDRESS.products+params.id).then(function(res){return res.json();}).then(function(res){setData(res.product_list);});},[params.id]);useEffect(function(){var slideInterval=setInterval(function(){var _data$image_list;currentIndex>=((_data$image_list=data.image_list)===null||_data$image_list===void 0?void 0:_data$image_list.length)-1||0?setCurrentIndex(0):setCurrentIndex(function(prev){return prev+1;});},4000);return function(){clearInterval(slideInterval);};},[currentIndex,data]);var _changeSlide=function changeSlide(index){setCurrentIndex(index);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ProductListNav,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"slideAndInfoWrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"slide\",children:[data.image_list&&data.image_list.filter(function(el,index){return index===currentIndex;}).map(function(el){return/*#__PURE__*/_jsx(\"div\",{className:\"imgSlide\",children:/*#__PURE__*/_jsx(\"img\",{src:el.url,alt:el.id,className:\"img\"})},el.id);}),/*#__PURE__*/_jsx(\"ul\",{className:\"thumbnailWrap\",children:data.image_list&&data.image_list.map(function(el,index){return/*#__PURE__*/_jsx(SlickThumbnail,{currentSlideId:currentIndex,slideId:index,imgUrl:el.url,changeSlide:function changeSlide(){return _changeSlide(index);}},el.id);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"productInfo\",children:/*#__PURE__*/_jsx(ProductInfoBox,{productId:params.id,koreanName:data.korean_name,sugarLevel:data.sugar_level,price:data.price,infoTag:data.description,isVegan:data.vegan_or_not,thumbnailImg:data.thumbnail_image_url,cartAndLikeBtn:true,is_like_True:data.is_like_True,updateProductLiked:updateProductLiked})})]}),/*#__PURE__*/_jsx(ProductReview,{})]});}","map":{"version":3,"names":["React","useState","useEffect","useParams","SlickThumbnail","ProductListNav","ProductReview","ProductInfoBox","API_ADDRESS","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductDetail","params","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","currentIndex","setCurrentIndex","updateProductLiked","updatedProduct","_objectSpread","is_like_True","window","scrollTo","fetch","products","id","then","res","json","product_list","slideInterval","setInterval","_data$image_list","image_list","length","prev","clearInterval","changeSlide","index","children","className","filter","el","map","src","url","alt","currentSlideId","slideId","imgUrl","productId","koreanName","korean_name","sugarLevel","sugar_level","price","infoTag","description","isVegan","vegan_or_not","thumbnailImg","thumbnail_image_url","cartAndLikeBtn"],"sources":["C:/Users/user/Desktop/2차프로젝트/DrTart-frontend/src/pages/ProductDetail/ProductDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router';\nimport SlickThumbnail from './SlickThumbnail';\nimport ProductListNav from '../ProductList/ProductListNav/ProductListNav';\nimport ProductReview from './ProductReview/ProductReview';\nimport ProductInfoBox from '../../components/ProductInfoBox/ProductInfoBox';\nimport { API_ADDRESS } from '../../apiConfig';\nimport './ProductDetail.scss';\n\nexport default function ProductDetail() {\n  const params = useParams();\n  const [data, setData] = useState({});\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  const updateProductLiked = () => {\n    const updatedProduct = { ...data, is_like_True: !data.is_like_True };\n\n    setData(updatedProduct);\n  };\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n\n  useEffect(() => {\n    fetch(API_ADDRESS.products + params.id)\n      .then(res => res.json())\n      .then(res => {\n        setData(res.product_list);\n      });\n  }, [params.id]);\n\n  useEffect(() => {\n    const slideInterval = setInterval(() => {\n      currentIndex >= data.image_list?.length - 1 || 0\n        ? setCurrentIndex(0)\n        : setCurrentIndex(prev => prev + 1);\n    }, 4000);\n\n    return () => {\n      clearInterval(slideInterval);\n    };\n  }, [currentIndex, data]);\n\n  const changeSlide = index => {\n    setCurrentIndex(index);\n  };\n\n  return (\n    <>\n      <ProductListNav />\n      <div className=\"slideAndInfoWrap\">\n        <div className=\"slide\">\n          {data.image_list &&\n            data.image_list\n              .filter((el, index) => index === currentIndex)\n              .map(el => (\n                <div className=\"imgSlide\" key={el.id}>\n                  <img src={el.url} alt={el.id} className=\"img\" />\n                </div>\n              ))}\n          <ul className=\"thumbnailWrap\">\n            {data.image_list &&\n              data.image_list.map((el, index) => (\n                <SlickThumbnail\n                  key={el.id}\n                  currentSlideId={currentIndex}\n                  slideId={index}\n                  imgUrl={el.url}\n                  changeSlide={() => changeSlide(index)}\n                />\n              ))}\n          </ul>\n        </div>\n        <div className=\"productInfo\">\n          <ProductInfoBox\n            productId={params.id}\n            koreanName={data.korean_name}\n            sugarLevel={data.sugar_level}\n            price={data.price}\n            infoTag={data.description}\n            isVegan={data.vegan_or_not}\n            thumbnailImg={data.thumbnail_image_url}\n            cartAndLikeBtn={true}\n            is_like_True={data.is_like_True}\n            updateProductLiked={updateProductLiked}\n          />\n        </div>\n      </div>\n      <ProductReview />\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}