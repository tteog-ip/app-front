{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/user/Desktop/2\\uCC28\\uD504\\uB85C\\uC81D\\uD2B8/DrTart-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useEffect,useState}from'react';import{Link,useLocation,useParams,useNavigate}from'react-router-dom';import Button from'../../../components/Button/Button';import Goods from'../Goods/Goods';import{API_ADDRESS}from'../../../apiConfig';import'../Order.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OrderList=function OrderList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orderList=_useState2[0],setOrderList=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOrderLoading=_useState4[0],setIsOrderLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isTermsChecked=_useState6[0],setIsTermsChecked=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalPrice=_useState8[0],setTotalPrice=_useState8[1];var _useParams=useParams(),pageType=_useParams.pageType;var location=useLocation();var navigate=useNavigate();var token=localStorage.getItem('TOKEN')||'';var fetchOrderData=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(API_ADDRESS.order_list,{headers:{Authorization:token}});case 2:data=_context.sent;_context.next=5;return data.json();case 5:res=_context.sent;if(res.order_list){setOrderList(function(){return res.order_list;});}else{setOrderList(function(){return[];});}case 7:case\"end\":return _context.stop();}}},_callee);})),[token]);useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setIsOrderLoading(true);_context2.next=3;return fetchOrderData();case 3:setIsOrderLoading(false);case 4:case\"end\":return _context2.stop();}}},_callee2);}))();},[fetchOrderData]);/*\n  const deleteGoods = id => {\n    const [targetToDelete] = cartList.filter(product => product.cart_id === id);\n    setCartList(cartList.filter(product => product.cart_id !== id));\n\n    fetch(API_ADDRESS.order_list, {\n      method: 'DELETE',\n      headers: {\n        Authorization: token,\n      },\n      body: JSON.stringify({\n        cart: id,\n      }),\n    });\n  };\n  */var onOrder=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var orderTable;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:orderTable=orderList.map(function(product){return{product_id:product.product_id,quantity:product.quantity};});_context3.next=3;return fetch(API_ADDRESS.order_list,{method:'POST',headers:{Authorization:token},body:JSON.stringify(orderTable)});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function onOrder(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"order\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pageTitleArea\",children:/*#__PURE__*/_jsx(\"div\",{className:\"pageTitle\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"orderTitle\",children:\"\\uC8FC\\uBB38\\uB0B4\\uC5ED\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"pageContent\",children:/*#__PURE__*/_jsx(\"section\",{className:\"productSection\",children:orderList.length?!isOrderLoading&&/*#__PURE__*/_jsx(\"table\",{className:\"goodsTable\",children:/*#__PURE__*/_jsx(\"thead\",{className:\"goodsTableHead\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"tableHeadElement tableHeadImage\"}),/*#__PURE__*/_jsx(\"th\",{className:\"tableHeadElement tableHeadGoods\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uC0C1\\uD488\"})}),/*#__PURE__*/_jsx(\"th\",{className:\"tableHeadElement tableHeadQuantity\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uC218\\uB7C9\"})}),/*#__PURE__*/_jsx(\"th\",{className:\"tableHeadElement tableHeadPrice\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uAE08\\uC561\"})}),/*#__PURE__*/_jsx(\"th\",{className:\"tableHeadElement tableHeadButton\"})]})})}):/*#__PURE__*/_jsx(\"div\",{className:\"nullContentTable\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uC8FC\\uBB38\\uD55C \\uB0B4\\uC5ED\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"})})})})]});};export default OrderList;","map":{"version":3,"names":["React","useCallback","useEffect","useState","Link","useLocation","useParams","useNavigate","Button","Goods","API_ADDRESS","jsx","_jsx","jsxs","_jsxs","OrderList","_useState","_useState2","_slicedToArray","orderList","setOrderList","_useState3","_useState4","isOrderLoading","setIsOrderLoading","_useState5","_useState6","isTermsChecked","setIsTermsChecked","_useState7","_useState8","totalPrice","setTotalPrice","_useParams","pageType","location","navigate","token","localStorage","getItem","fetchOrderData","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","res","wrap","_callee$","_context","prev","next","fetch","order_list","headers","Authorization","sent","json","stop","_callee2","_callee2$","_context2","onOrder","_ref3","_callee3","orderTable","_callee3$","_context3","map","product","product_id","quantity","method","body","JSON","stringify","apply","arguments","className","children","length"],"sources":["C:/Users/user/Desktop/2차프로젝트/DrTart-frontend/src/pages/Order/OrderList/OrderList.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport { Link, useLocation, useParams, useNavigate } from 'react-router-dom';\nimport Button from '../../../components/Button/Button';\nimport Goods from '../Goods/Goods';\nimport { API_ADDRESS } from '../../../apiConfig';\nimport '../Order.scss';\n\nconst OrderList = () => {\n  const [orderList, setOrderList] = useState([]);\n  const [isOrderLoading, setIsOrderLoading] = useState(false);\n  const [isTermsChecked, setIsTermsChecked] = useState(false);\n  const [totalPrice, setTotalPrice] = useState(0);\n  const { pageType } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n  let token = localStorage.getItem('TOKEN') || '';\n\n  const fetchOrderData = useCallback(async () => {\n    const data = await fetch(API_ADDRESS.order_list, {\n      headers: { Authorization: token },\n    });\n    const res = await data.json();\n    if (res.order_list) {\n      setOrderList(() => res.order_list);\n    } else {\n      setOrderList(() => []);\n    }\n  }, [token]);\n\n  useEffect(() => {\n    (async () => {\n      setIsOrderLoading(true);\n      await fetchOrderData();\n      setIsOrderLoading(false);\n    })();\n  }, [fetchOrderData]);\n  /*\n  const deleteGoods = id => {\n    const [targetToDelete] = cartList.filter(product => product.cart_id === id);\n    setCartList(cartList.filter(product => product.cart_id !== id));\n\n    fetch(API_ADDRESS.order_list, {\n      method: 'DELETE',\n      headers: {\n        Authorization: token,\n      },\n      body: JSON.stringify({\n        cart: id,\n      }),\n    });\n  };\n  */\n  const onOrder = async () => {\n    const orderTable = orderList.map(product => ({\n      product_id: product.product_id,\n      quantity: product.quantity,\n    }));\n    await fetch(API_ADDRESS.order_list, {\n      method: 'POST',\n      headers: {\n        Authorization: token,\n      },\n      body: JSON.stringify(orderTable),\n    });\n  };\n\n  return (\n    <div className=\"order\">\n      <div className=\"pageTitleArea\">\n        <div className=\"pageTitle\">\n          <h1 className=\"orderTitle\">주문내역</h1>\n        </div>\n      </div>\n      <div className=\"pageContent\">\n        <section className=\"productSection\">\n          {orderList.length ? (\n            !isOrderLoading && (\n              <table className=\"goodsTable\">\n                <thead className=\"goodsTableHead\">\n                  <tr>\n                    <th className=\"tableHeadElement tableHeadImage\" />\n                    <th className=\"tableHeadElement tableHeadGoods\">\n                      <p>상품</p>\n                    </th>\n                    <th className=\"tableHeadElement tableHeadQuantity\">\n                      <p>수량</p>\n                    </th>\n                    <th className=\"tableHeadElement tableHeadPrice\">\n                      <p>금액</p>\n                    </th>\n                    <th className=\"tableHeadElement tableHeadButton\" />\n                  </tr>\n                </thead>\n              </table>\n            )\n          ) : (\n            <div className=\"nullContentTable\">\n              <p>주문한 내역이 없습니다.</p>\n            </div>\n          )}\n        </section>\n      </div>\n    </div>\n  );\n};\nexport default OrderList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}